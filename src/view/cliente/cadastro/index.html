<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Sistema Multilojas - Cadastro Cliente</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/checkout/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    

    <!-- Bootstrap core CSS -->
    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap core CSS -->

    <style>
      .text-primary1 {
        color: whitesmoke;
      }
      .text-center img {
        color: rgb(255, 255, 255);
        margin-bottom: 2%;
      }

      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      body{
        background-color: rgb(39,61,102);
        color: white;
        max-width: 960px;
        margin-left: 20%;
      }
      .container {
        max-width:920px;
        margin-left: 10%;
      }
      li {
        color: white;
      }
    </style>

    
    
  </head>
  <body>
  <br>
<div class="container">
  <main>
      <div class="col-md-7 col-lg-8 ">
       <center><h4 class="mb-4">Cadastro do Cliente</h4></center>
        <hr>
        <form class="needs-validation" novalidate>
          <div class="row justify-content-center align-items-center">
            <div class="col-12">
              <label for="name" class="form-label">Nome Completo</label>
              <input type="text" name="nome" class="form-control" id="nome" placeholder="">
            </div>

            <div class="col-12">
              <label for="phone" class="form-label">Telefone</label>
              <div class="input-group has-validation">
                <span class="input-group-text">+55</span>
                <input type="text" name="telefone" class="form-control justify-content-center " id="telefone" placeholder="(XX) XXXXX-XXXX" required onkeypress="mask(this, mphone);">
            </div>

            <div class="col-12">
              <label for="email" class="form-label">Email</label><!--e-mail pessoal (cliente)-->
              <input type="email" name="email" class="form-control" required id="email" placeholder="brandname@exemplo.com">
            </div>
            <div class="col-12">
              <label for="cpf" class="form-label">CPF</label><!--CPF (cliente)-->
              <input type="text" name="cpf" class="form-control" id="cpf" placeholder=" XXX. XXX. XXX - XX" onkeypress="maskc(this, cpf);"> <br>
            <div class="col-12">
              <label for="senha" class="form-label">Senha</label><!--senha (cliente)-->
              <input type="password" name="senha" class="form-control" id="senha"  >
            </div>
           <div class="col-md-4 col-lg-12">
              <label for="description" class="form
              <textarea class="form-control" aria-label="With textarea" id="textarea"></textarea>
            </div>
            <div class="col-md-4 col-lg-12">
             
             
            </div>
          <hr class="my-4">

          </div>
           
          </div>
          <br>
          <button class="w-100 btn btn-primary btn-lg" type="submit" style="margin-top:2%">Finalizar Cadastro</button>
        </form>
      </div>
      <div id="#error"></div>
    </div>
  </main>
</div>
</body>
<footer class="py-3 my-4">
  <nav class="navbar navbar-expand-lg aria-label Twelfth navbar example"></nav>
    <ul class="nav justify-content-center border-bottom pb-3 mb-3">
      <li class="nav-item" style="cursor: pointer;"><a href="/" class="nav-link px-2">Home</a></li>
      <li class="nav-item" style ="cursor: pointer;"><a href="/" class="nav-link px-2">Contato</a></li>
      <li class="nav-item" style="cursor: pointer;"><a href="/cliente/login" class="nav-link px-2">Login</a></li>
      <li class="nav-item" style="cursor: pointer;"><a href="/" class="nav-link px-2">Sobre</a></li>
    </ul>
    <p class="text-center text-muted">&copy; 2021-2022 Multilojas</p>
  </nav>
  </footer>

<script>
  const form = document.querySelector('form');
  const error = document.getElementById('#error');
  form.onsubmit = (event) => {
    event.preventDefault();

    const dados = Object.fromEntries(new FormData(form));
    createAccount(dados);
  };

  async function createAccount(dados) {
    console.log(dados)
    const url = '/cliente/cadastro/perfil';
    
    const config = {
      method: 'post',
      body: JSON.stringify(dados),
      headers: {
        'Content-Type': 'application/json; charset=UTF-8',
      },
    };

    const resposta = await (await fetch(url, config)).json();
    console.log(resposta)
    if(resposta.error == 1){
      const view = `<div class="alert alert-danger alert-dismissible fade show" role="alert">
          <strong>Ocorreu um problema no seu Cadastro: </strong>${resposta.mensage}
      </div>`
      error.insertAdjacentHTML('beforeend', view);
    } else if(resposta.error == 2){
      const view = `<div class="alert alert-warning alert-dismissible fade show" role="alert">
          <strong>Ocorreu um problema no seu Cadastro: </strong>${resposta.mensage}
      </div>`
      error.insertAdjacentHTML('beforeend', view);
    } else if(resposta.error == 0){
      location.href = '/cliente/login/';
    }
  }
</script>
</html>