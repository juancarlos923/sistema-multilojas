<!doctype html>
<html lang="pt-br">
  <!--@charset "UTF-8";/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors
  * Copyright 2011-2021 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, Júlio Caio and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Cliente - Últimas Compras</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- Bootstrap core CSS -->
<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
     @import url('https://fonts.googleapis.com/css2?family=Merriweather&display=swap');

      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="dashboard.css" rel="stylesheet">
  </head>
<body id="body-pd">
  <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" fill="currentColor" class="bi-bi-grid-fill" viewBox="0 0 16 16">
      <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
    </svg>Multilojas</a>
    <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-nav">
      <div class="nav-item text-nowrap">
        <a class="nav-link px-3" href="/cliente/login/exit">Sair</a>
      </div>
    </div>
  </header>
<div class="container-md">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse" style="background-color: rgba(39,61,102);">
      <div class="position-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/cliente/painel/">
              <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-columns-gap" viewBox="0 0 16 16">
                <path d="M6 1v3H1V1h5zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1zm14 12v3h-5v-3h5zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-5zM6 8v7H1V8h5zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H1zm14-6v7h-5V1h5zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1h-5z"/>
              </svg>
          <span class="links_name">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/cliente/edicao/"><!--inserir o link com o arquivo que você corrigiu-->
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="26" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
              </svg>
          <span class="links_name">Dados</span>
            </a>
        </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href=""><!--inserir o link com o arquivo que você corrigiu-->
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="26" fill="currentColor" class="bi bi-bag-check" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
    <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"/>
  </svg>
          <span class="links_name">Compras</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    </div>
    <div class="title text-center">
        <h2 style="color: rgb(22, 88, 126); font-weight:700"><br>Últimas Compras<hr></h2>
    </div>
<div id="dados_vendas"></div>
</div>
</body>
<footer class="py-3 my-4">
    <nav class="navbar navbar-expand-lg aria-label Twelfth navbar example"></nav>
      <ul class="nav justify-content-center border-bottom pb-3 mb-3">
        <li class="nav-item" style="cursor: pointer;"><a href="C:/Atividades-vscode/Projeto%20Multilojas%20-%20Equipe%201/index/index.html" class="nav-link px-2">Home</a></li>
        <li class="nav-item" style ="cursor: pointer;"><a href="#" class="nav-link px-2">Contato</a></li>
        <li class="nav-item" style="cursor: pointer;"><a href="#C:/Atividades-vscode/Projeto%20Multilojas%20-%20Equipe%201/login/index.html" class="nav-link px-2">Login</a></li>
        <li class="nav-item" style="cursor: pointer;"><a href="#" class="nav-link px-2">Sobre</a></li>
      </ul>
      <p class="text-center text-muted">&copy; 2021-2022 Multilojas</p>
    </nav>
</footer>

<script>

  checkLogin()
  async function checkLogin() {
    const url0 = '/cliente/login/verify';
    const result = await (await fetch(url0)).json();
    if(result.status != 0){
      location.href= "/cliente/login";
    } else {
      createViewCompras(result.info.id);
    }
  }

  const vendas = document.querySelector('#dados_vendas');
  
  async function createViewCompras(id){
        
    const url = `/cliente/compras/${id}`;
    let result = await (await fetch(url)).json();
    const view = `
      <div class="col-lg-10 mx-auto">
          <div class="card rounded shadow border-0">
            <div class="card-body p-5 bg-white rounded">
              <div class="table-responsive">
                <table id="example" style="width:100%" class="table table-striped table-bordered">
                  <thead>
                      <tr>
                          <td><b>ID da Loja</b></td>
                          <td><b>Quantidade de Produtos</b></td>
                          <td><b>Valor</b></td>
                          <td><b>Data</b></td>
                          <td><b>Meio de Pagamento</b></td>
                          <td><b>Status de Entrega</b></td>
                          <td><b>Status de Pagamento</b></td>
                      </tr>
                  </thead>
                  <tbody>`
                        
        let view2 = ``
        for (let i = 0; i < result.length; i++) {
            view2 += "</tr>" + 
            "<td>" + result[i].id_loja + "</td>" +
            "<td>" + result[i].descricao + "</td>" +
            "<td>" + result[i].valor_total + "</td>" +
            "<td>" + result[i].forma_pagamento + "</td>" +
            "<td>" + result[i].entrega + "</td>" +
            "<td>" + result[i].status + "</td>" +
            "<td>" + result[i].data + "</td>" + "</tr>";
        }
        const view3 = `  
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
        </div>
    </div>`
    vendas.insertAdjacentHTML('beforeend', view + view2 + view3);
  }
</script>
</html>