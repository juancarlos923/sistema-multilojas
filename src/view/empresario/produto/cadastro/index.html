<!DOCTYPE html>
<html lang="pt-br">
    <!--@charset "UTF-8";/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors
  * Copyright 2011-2021 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja - Cadastro Produto</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="style1.css"/>

    <link rel="stylesheet" href="button.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>
<body style="background: rgba(39,61,102);">
  <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" fill="currentColor" class="bi-bi-grid-fill" viewBox="0 0 16 16">
      <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
    </svg>Multilojas</a>
    <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-nav">
        <a class="nav-link px-3" href="/empresario/login/exit">Sair</a>
      </div>
    </div>
  </header>
  
  <div class="container-md">
    <div class="row">
      <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse" style="background-color: rgb(255, 255, 255)">
        <div class="position-sticky pt-3">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link"  style="color: rgb(22, 88, 126);" aria-current="page" href="/empresario/">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="26" fill="currentColor" class="bi bi-columns-gap" viewBox="0 0 16 16">
                  <path d="M6 1v3H1V1h5zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1zm14 12v3h-5v-3h5zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-5zM6 8v7H1V8h5zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H1zm14-6v7h-5V1h5zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1h-5z"/>
            </svg>
            <span class="links_name">Dashboard</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="color: rgb(22, 88, 126);"aria-current="page" href="/empresario/edicao-dados">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                </svg>
            <span class="links_name">Dados</span>
              </a>
            </li>
            <a class="nav-link" style="color: rgb(22, 88, 126);" href="/empresario/loja/edicao">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="26" fill="currentColor" class="bi bi-apple" viewBox="0 0 16 16">
                <path d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516.024.034 1.52.087 2.475-1.258.955-1.345.762-2.391.728-2.43zm3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422.212-2.189 1.675-2.789 1.698-2.854.023-.065-.597-.79-1.254-1.157a3.692 3.692 0 0 0-1.563-.434c-.108-.003-.483-.095-1.254.116-.508.139-1.653.589-1.968.607-.316.018-1.256-.522-2.267-.665-.647-.125-1.333.131-1.824.328-.49.196-1.422.754-2.074 2.237-.652 1.482-.311 3.83-.067 4.56.244.729.625 1.924 1.273 2.796.576.984 1.34 1.667 1.659 1.899.319.232 1.219.386 1.843.067.502-.308 1.408-.485 1.766-.472.357.013 1.061.154 1.782.539.571.197 1.111.115 1.652-.105.541-.221 1.324-1.059 2.238-2.758.347-.79.505-1.217.473-1.282z"/>
                <path d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516.024.034 1.52.087 2.475-1.258.955-1.345.762-2.391.728-2.43zm3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422.212-2.189 1.675-2.789 1.698-2.854.023-.065-.597-.79-1.254-1.157a3.692 3.692 0 0 0-1.563-.434c-.108-.003-.483-.095-1.254.116-.508.139-1.653.589-1.968.607-.316.018-1.256-.522-2.267-.665-.647-.125-1.333.131-1.824.328-.49.196-1.422.754-2.074 2.237-.652 1.482-.311 3.83-.067 4.56.244.729.625 1.924 1.273 2.796.576.984 1.34 1.667 1.659 1.899.319.232 1.219.386 1.843.067.502-.308 1.408-.485 1.766-.472.357.013 1.061.154 1.782.539.571.197 1.111.115 1.652-.105.541-.221 1.324-1.059 2.238-2.758.347-.79.505-1.217.473-1.282z"/>
              </svg>
              <span class="links_name">Editar Loja</span>
            </a>
            <li class="nav-item">
              <a class="nav-link" style="color: rgb(22, 88, 126);" href="file:///C:/Users/julio/Downloads/Vscode-%20Multilojas/Projeto%20Multilojas%20-%20Equipe%201/vendas/index.html">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="26" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                  <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                </svg>
              <span class="links_name">Produto</span>
              </a>
            </li>
          </ul>
        </div>
      </nav>
      </div>
      </div>
  <div class="form-signin">

      <div class="title text-center">
        <h2 style="color: rgb(255, 255, 255);font-weight:700;">Inserir Produto</h2>
    </div>
    <br>
      <br>
        <form>
          <div class="form-floating">
            <center><a for="floatingInput" style="color:white" >Nome</a></center>
            <input type="text" class="form-control" name="nome" id="name">
          </div>
          <br>

          <div class="col-lg-12"><center>
            <a for="floatingInput" style="color:white;">Descrição</a></center>
            <textarea  style="height: 80px; margin-top: 2px;" name="descricao" class="form-control" aria-label="With textarea" id="textarea"></textarea>
          </div>

          <div class="col-4">
            <center><a for="floatingInput" style="color:white" >Preço</a></center>
            <input type="number" class="form-control" name="preco" style="height: 50px; margin-top: 2px;" id="price" placeholder="R$">
          </div>

          <div class="col-6">
            <center><a for="floatingInput">Categoria</a></center>
          <select name="categoria" class="form-select" aria-label="Default select example" style="background: rgb(204, 204, 204); height: 42px; margin-left: 10px;">
            <option selected style="color: black">Escolher...</option>
            <option value="E-book">E-book</option>
            <option value="Curso">Curso</option>
          </select>
        </div>
          <div class="col-6">
            <center><a for="floatingInput">Tipo de Entrega</a></center>
          <select name="forma_entrega" class="form-select" aria-label="Default select example" style="background: rgb(204, 204, 204); height: 42px; margin-left: 10px;">
            <option selected style="color: black">Escolher...</option>
            <option value="Email">E-mail</option>
            <option value="Kindle">Kindle</option></label>
            <option value="Telefone">Telefone</option></label>
          
          </select>
        </div>
          
        <br>
        <button class="w-100 btn btn-primary btn-lg" type="submit" style="margin-top:2%">Inserir</button>
        </form>
        <div id="#error"></div>
    </div>
</div>

<footer class="py-3 my-4">
  <nav class="navbar navbar-expand-lg aria-label Twelfth navbar example"></nav>
    <ul class="nav justify-content-center border-bottom pb-3 mb-3" style="color: white;">
      <li class="nav-item" style="cursor: pointer;"><a href="/" class="nav-link px-2">Home</a></li>
      <li class="nav-item" style ="cursor: pointer;"><a href="/#contato" class="nav-link px-2" >Contato</a></li>
      <li class="nav-item" style="cursor: pointer;"><a href="/empresario/login" class="nav-link px-2">Login</a></li>
      <li class="nav-item" style="cursor: pointer;"><a href="/#sobre" class="nav-link px-2">Sobre</a></li>
    </ul>
    <p class="text-center text-muted">&copy; 2021-2022 Multilojas</p>
</footer>
</body>

<script>

  checkLogin()
  async function checkLogin() {
    const url = '/empresario/login/verify';
    
    const result = await (await fetch(url)).json();
    if(result.status == 0){
      const url2 = `/loja/possui/${result.info.id}`;
      const result2 = await (await fetch(url2)).json();
      if(result2.result == 0){
        location.href= "/empresario/login";
      } else {
        return result2.loja;
      }
    } else {
      location.href= "/empresario/login";
    }
  }

  const form = document.querySelector('form');
  const error = document.getElementById('#error');

  form.onsubmit = (event) => {
    event.preventDefault();

    const dados = Object.fromEntries(new FormData(form));
    
    createAccount(dados);
  };

  async function createAccount(dados) {
    const url2 = '/empresario/login/verify';
    const result2 = await (await fetch(url2)).json();

    const url3 = `/loja/possui/${result2.info.id}`;
    const result3 = await (await fetch(url3)).json();
    dados["id_loja"] = result3.loja;

    const url = '/loja/produto/cadastro';
    const config = {
      method: 'post',
      body: JSON.stringify(dados),
      headers: {
        'Content-Type': 'application/json; charset=UTF-8',
      },
    };
    
    const resposta = await (await fetch(url, config)).json();
    
    if(resposta.error == 1){
      const view = `<div class="alert alert-danger alert-dismissible fade show" role="alert">
          <strong>Ocorreu um problema no cadastro do produto: </strong>${resposta.mensage}
      </div>`
      error.insertAdjacentHTML('beforeend', view);
    } else if(resposta.error == 2){
      const view = `<div class="alert alert-warning alert-dismissible fade show" role="alert">
          <strong>Ocorreu um problema no cadastro do produto: </strong>${resposta.mensage}
      </div>`
      error.insertAdjacentHTML('beforeend', view);
    } else if(resposta.error == 0){
      location.href = '/empresario/';
    }
  }
</script>

</html>